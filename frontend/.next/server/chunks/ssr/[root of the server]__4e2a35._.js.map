{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaron/Documents/MYRA-langchain/frontend/src/components/MarkdownRenderer.tsx"],"sourcesContent":["import ReactMarkdown from \"react-markdown\";\nimport { memo } from \"react\";\nimport remarkGfm from \"remark-gfm\";\n\nconst MarkdownRenderer = memo(({ content }: { content: string }) => {\n  const parsedContent = content.replace(/\\\\n/g, '\\n'); // Parse the escape sequences to convert \\n to actual linebreaks\n  return <ReactMarkdown remarkPlugins={[remarkGfm]}>{parsedContent}</ReactMarkdown>;\n});\n\nexport default MarkdownRenderer;\n"],"names":[],"mappings":";;;;AACA;AADA;AAEA;;;;;AAEA,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,OAAI,AAAD,EAAE,CAAC,EAAE,OAAO,EAAuB;IAC7D,MAAM,gBAAgB,QAAQ,OAAO,CAAC,QAAQ,OAAO,gEAAgE;IACrH,qBAAO,8OAAC,wLAAA,CAAA,UAAa;QAAC,eAAe;YAAC,6IAAA,CAAA,UAAS;SAAC;kBAAG;;;;;;AACrD;uCAEe"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaron/Documents/MYRA-langchain/frontend/src/components/Output.tsx"],"sourcesContent":["// src/components/Output.tsx\n\"use client\"; // Ensure this directive is at the very top for client-side hooks\n\nimport MarkdownRenderer from \"@/components/MarkdownRenderer\";\nimport { Step, type ChatOutput } from \"@/types\";\nimport { useEffect, useState } from \"react\";\n\ntype ToolResult = {\n  answer: string;\n  tools_used: string[];\n  image_url?: string;\n  description?: string;\n};\n\ntype OutputEntry = {\n  question: string;\n  steps: { name: string; result: Record<string, string> }[];\n  result: ToolResult;\n};\n\n// Define the interface for your Output component's props\ninterface OutputProps {\n  output: OutputEntry;\n  isGenerating: boolean; // Added this prop to control loading state\n}\n\nconst Output = ({ output, isGenerating }: OutputProps) => { // Destructure isGenerating here\n  const detailsHidden = !!output.result?.answer;\n  console.log(\"Output result:\", output.result);\n  return (\n    <div className=\"border-t border-gray-700 py-10 first-of-type:pt-0 first-of-type:border-t-0\">\n      <p className=\"text-3xl\">{output.question}</p>\n\n      {/* Steps */}\n      {output.steps.length > 0 && (\n        <GenerationSteps steps={output.steps} done={detailsHidden} />\n      )}\n\n      {/* Output / Loading Spinner */}\n      {/*\n        Display loading spinner IF agent is generating AND the final answer is not yet available.\n        Otherwise, display the MarkdownRenderer (if output.result.answer exists).\n      */}\n      {isGenerating && !output.result?.answer ? (\n        // Loading state: Spinner and message\n        <div className=\"mt-5 text-gray-500 animate-pulse\">\n          <p>MYRA is thinking...</p>\n          <div className=\"flex justify-center items-center h-20\">\n            {/* Simple Tailwind CSS spinner SVG */}\n            <svg\n              className=\"animate-spin h-8 w-8 text-gray-400\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n            >\n              <circle\n                className=\"opacity-25\"\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                stroke=\"currentColor\"\n                strokeWidth=\"4\"\n              ></circle>\n              <path\n                className=\"opacity-75\"\n                fill=\"currentColor\"\n                d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              ></path>\n            </svg>\n          </div>\n        </div>\n      ) : (\n        // Display the actual output answer once it's available\n        // Ensure output.result.answer exists before rendering MarkdownRenderer\n        output.result?.answer && (\n          <div\n            className=\"mt-5 prose dark:prose-invert min-w-full prose-pre:whitespace-pre-wrap text-gray-900\"\n            style={{\n              overflowWrap: \"anywhere\",\n            }}\n          >\n            <MarkdownRenderer content={output.result.answer} />\n\n            {output.result?.image_url && (\n              <div className=\"mt-5 flex justify-center\">\n                <img\n                  src={`http://localhost:8000/${output.result.image_url}`}\n                  alt=\"Generated Plot\"\n                  className=\"rounded-lg shadow-md max-w-full h-auto\"\n                />\n              </div>\n            )}\n          </div>\n        )\n      )}\n\n      {/* Tools */}\n      {output.result?.tools_used?.length > 0 && (\n        <div className=\"flex items-baseline mt-5 gap-1\">\n          <p className=\"text-xs text-gray-500\">Tools used:</p>\n\n          <div className=\"flex flex-wrap items-center gap-1\">\n            {output.result.tools_used.map((tool, i) => (\n              <p\n                key={i}\n                className=\"text-xs px-1 py-[1px] bg-gray-800 rounded text-white\"\n              >\n                {tool}\n              </p>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// GenerationSteps Component - This component also uses useState and useEffect\n// For a clean separation, it's best practice to add \"use client\" to this file as well\n// if it's a separate file, or keep it as part of Output.tsx if it's only used here.\n// Assuming it's in the same file for minimal changes to your project structure.\nconst GenerationSteps = ({ steps, done }: { steps: Step[]; done: boolean }) => {\n  const [hidden, setHidden] = useState(false);\n\n  useEffect(() => {\n    if (done) setHidden(true);\n  }, [done]);\n\n  return (\n    <div className=\"border border-gray-700 rounded mt-5 p-3 flex flex-col\">\n      <button\n        className=\"w-full text-left flex items-center justify-between\"\n        onClick={() => setHidden(!hidden)}\n      >\n        Steps {hidden ? <ChevronDown /> : <ChevronUp />}\n      </button>\n\n      {!hidden && (\n        <div className=\"flex gap-2 mt-2\">\n          <div className=\"pt-2 flex flex-col items-center shrink-0\">\n            <span\n              className={`inline-block w-3 h-3 transition-colors rounded-full ${\n                !done ? \"animate-pulse bg-emerald-400\" : \"bg-gray-500\"\n              }`}\n            ></span>\n\n            <div className=\"w-[1px] grow border-l border-gray-700\"></div>\n          </div>\n\n          <div className=\"space-y-2.5\">\n            {steps.map((step, j) => {\n              return (\n                <div key={j}>\n                  <p>{step.name}</p>\n\n                  <div className=\"flex flex-wrap items-center gap-1 mt-1\">\n                    {Object.entries(step.result).map(([key, value]) => {\n                      return (\n                        <p\n                          key={key}\n                          className=\"text-xs px-1.5 py-0.5 bg-gray-800 rounded text-white\"\n                        >\n                          {key}: {value}\n                        </p>\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// ChevronDown Component (No changes - doesn't use hooks)\nconst ChevronDown = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"lucide lucide-chevron-down\"\n  >\n    <path d=\"m6 9 6 6 6-6\" />\n  </svg>\n);\n\n// ChevronUp Component (No changes - doesn't use hooks)\nconst ChevronUp = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"lucide lucide-chevron-up\"\n  >\n    <path d=\"m18 15-6-6-6 6\" />\n  </svg>\n);\n\nexport default Output;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaron/Documents/MYRA-langchain/frontend/src/components/TextArea.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { IncompleteJsonParser } from \"incomplete-json-parser\";\nimport { ChatOutput } from \"@/types\";\n\ntype ToolResult = {\n  answer: string;\n  tools_used: string[];\n  image_url?: string;\n  description?: string;\n};\n\ntype OutputEntry = {\n  question: string;\n  steps: { name: string; result: Record<string, string> }[];\n  result: ToolResult;\n};\n\nconst TextArea = ({\n  className,\n  setIsGenerating,\n  isGenerating,\n  setOutputs,\n  outputs,\n}: {\n  className?: string;\n  setIsGenerating: React.Dispatch<React.SetStateAction<boolean>>;\n  isGenerating: boolean;\n  setOutputs: React.Dispatch<React.SetStateAction<OutputEntry[]>>;\n  outputs: OutputEntry[];\n}) => {\n  // Parser instance to handle incomplete JSON streaming responses\n  const parser = new IncompleteJsonParser();\n\n  const [text, setText] = useState(\"\");\n  const textAreaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Handles form submission\n  async function submit(e: React.FormEvent) {\n    e.preventDefault();\n    sendMessage(text);\n    setText(\"\");\n  }\n\n  // Sends message to the api and handles streaming response processing\n  const sendMessage = async (text: string) => {\n    const newOutputs = [\n      ...outputs,\n      {\n        question: text,\n        steps: [],\n        result: {\n          answer: \"\",\n          tools_used: [],\n        },\n      },\n    ];\n\n    setOutputs(newOutputs);\n    setIsGenerating(true);\n\n    try {\n      const res = await fetch(`http://localhost:8000/invoke?content=${text}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(text),\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Error\");\n      }\n\n      const data = res.body;\n      if (!data) {\n        setIsGenerating(false);\n        return;\n      }\n\n      const reader = data.getReader();\n      const decoder = new TextDecoder();\n      let done = false;\n      let answer: {\n        answer: string;\n        tools_used: string[];\n        image_url?: string;\n        description?: string;\n      } = {\n        answer: \"\",\n        tools_used: [],\n      };\n      let currentSteps: { name: string; result: Record<string, string> }[] = [];\n      let buffer = \"\";\n\n      // Process streaming response chunks and parse steps/results\n      while (!done) {\n        const { value, done: doneReading } = await reader.read();\n        done = doneReading;\n        let chunkValue = decoder.decode(value);\n        // console.log(`chunk: ${chunkValue}`);\n        if (!chunkValue) continue;\n\n        buffer += chunkValue;\n\n        // Handle different types of steps in the response stream - regular steps and final answer\n        if (buffer.includes(\"</step_name>\")) {\n          const stepNameMatch = buffer.match(/<step_name>([^<]*)<\\/step_name>/);\n          if (stepNameMatch) {\n            const [_, stepName] = stepNameMatch;\n            try {\n              if (stepName !== \"final_answer\") {\n                const fullStepPattern =\n                  /<step><step_name>([^<]*)<\\/step_name>([^<]*?)(?=<step>|<\\/step>|$)/g;\n                const matches = [...buffer.matchAll(fullStepPattern)];\n\n                for (const match of matches) {\n                  const [fullMatch, matchStepName, jsonStr] = match;\n                  if (jsonStr) {\n                    try {\n                      const result = JSON.parse(jsonStr);\n                      currentSteps.push({ name: matchStepName, result });\n                      buffer = buffer.replace(fullMatch, \"\");\n                    } catch (error) {\n                    }\n                  }\n                }\n              } else {\n                // If it's the final answer step, parse the streaming JSON using incomplete-json-parser\n                const jsonMatch = buffer.match(\n                  /(?<=<step><step_name>final_answer<\\/step_name>)(.*)/\n                );\n                if (jsonMatch) {\n                  const [_, jsonStr] = jsonMatch;\n                  parser.write(jsonStr);\n                  const result = parser.getObjects();\n                  answer = result;\n                  parser.reset();\n                }\n              }\n            } catch (e) {\n              console.log(\"Failed to parse step:\", e);\n            }\n          }\n        }\n\n        // Update output with current content and steps\n        setOutputs((prevState) => {\n          const lastOutput = prevState[prevState.length - 1];\n          return [\n            ...prevState.slice(0, -1),\n            {\n              ...lastOutput,\n              steps: currentSteps,\n              result: answer,\n            },\n          ];\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  // Submit form when Enter is pressed (without Shift)\n  function submitOnEnter(e: React.KeyboardEvent<HTMLTextAreaElement>) {\n    if (e.code === \"Enter\" && !e.shiftKey && text !== \"\") {\n      submit(e);\n    }\n  }\n\n  // Dynamically adjust textarea height based on content\n  const adjustHeight = () => {\n    const textArea = textAreaRef.current;\n    if (textArea) {\n      textArea.style.height = \"auto\";\n      textArea.style.height = `${textArea.scrollHeight}px`;\n    }\n  };\n\n  // Adjust height whenever text content changes\n  useEffect(() => {\n    adjustHeight();\n  }, [text]);\n\n  // Add resize event listener to adjust height on window resize\n  useEffect(() => {\n    const handleResize = () => adjustHeight();\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return (\n    <form\n      onSubmit={submit}\n      className=\"flex gap-3 z-10 w-full\"\n    >\n      <div className=\"w-full flex items-center bg-gray-800 rounded-xl border border-gray-600 text-white\">\n        <textarea\n          ref={textAreaRef}\n          value={text}\n          onChange={(e) => setText(e.target.value)}\n          onKeyDown={(e) => submitOnEnter(e)}\n          rows={1}\n          className=\"w-full p-3 bg-transparent min-h-20 focus:outline-none resize-none\"\n          placeholder=\"Ask a question...\"\n        />\n\n        <button\n          type=\"submit\"\n          disabled={isGenerating || !text}\n          className=\"disabled:bg-gray-500 bg-[#09BDE1] transition-colors w-9 h-9 rounded-full shrink-0 flex items-center justify-center mr-2\"\n        >\n          <ArrowIcon />\n        </button>\n      </div>\n    </form>\n  );\n};\n\nconst ArrowIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"lucide lucide-arrow-right\"\n  >\n    <path d=\"M5 12h14\" />\n    <path d=\"m12 5 7 7-7 7\" />\n  </svg>\n);\n\nexport default TextArea;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 686, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 692, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaron/Documents/MYRA-langchain/frontend/src/components/MostRecentStrategyDisplay.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\ninterface StrategyOutput {\n  timestamp: string; // Assuming timestamp is converted to string (ISO format) by backend\n  description: string; // This is what you're using for 'description'\n  // Add other properties if you decide to display them later, e.g.:\n  // tool_name?: string;\n  // tool_output_data?: any; // Or a more specific type for your backtest data\n}\n\nconst MostRecentStrategyDisplay = () => {\n  const [strategy, setStrategy] = useState<StrategyOutput | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchRecentStrategy = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        // Ensure this URL matches your backend's URL and endpoint\n        const response = await fetch('http://localhost:8000/api/most_recent_strategy');\n        \n        if (!response.ok) {\n          if (response.status === 404) {\n            setStrategy(null); // Explicitly set to null if no strategy found\n            return; // No error, just no data\n          }\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        \n        const result = await response.json();\n        if (result.success && result.data) {\n            console.log(\"Most recent strategy data:\", result.data);\n          setStrategy(result.data);\n        } else {\n          setStrategy(null);\n          setError(result.message || 'Failed to fetch strategy data.');\n        }\n      } catch (e) {\n        console.error(\"Error fetching most recent strategy:\", e);\n        setError(\"Could not load recent strategy. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchRecentStrategy();\n  }, []); // Empty dependency array means this runs once on mount\n\n  if (loading) {\n    return (\n      <div className=\"sticky p-4 bg-gray-800 text-gray-200 rounded-lg shadow-lg animate-pulse\">\n        <p className=\"text-lg font-semibold mb-2\">Loading Recent Strategy...</p>\n        <div className=\"h-4 bg-gray-700 rounded w-3/4 mb-2\"></div>\n        <div className=\"h-4 bg-gray-700 rounded w-1/2\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 bg-red-800 text-white rounded-lg shadow-lg\">\n        <p className=\"text-lg font-semibold mb-2\">Error</p>\n        <p>{error}</p>\n      </div>\n    );\n  }\n\n  if (!strategy) {\n    return (\n      <div className=\"p-4 bg-gray-800 text-gray-400 rounded-lg shadow-lg\">\n        <p className=\"text-lg font-semibold mb-2\">No Recent Strategy Found</p>\n        <p className=\"text-sm\">Run a backtest to see results here!</p>\n      </div>\n    );\n  }\n\n  if (strategy) {\n    return (\n      <div className=\"p-4 bg-gray-800 text-gray-200 rounded-lg shadow-lg\">\n        <p className=\"text-lg font-semibold mb-2\">Most Recent Strategy</p>\n        <p className=\"text-sm\">{strategy.description}</p>\n        <p>{}</p>\n      </div>\n    );\n  }\n}\n\nexport default MostRecentStrategyDisplay;"],"names":[],"mappings":";;;;AAAA;;;AAUA,MAAM,4BAA4B;IAChC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAyB;IAChE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,sBAAsB;YAC1B,IAAI;gBACF,WAAW;gBACX,SAAS;gBACT,0DAA0D;gBAC1D,MAAM,WAAW,MAAM,MAAM;gBAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,IAAI,SAAS,MAAM,KAAK,KAAK;wBAC3B,YAAY,OAAO,8CAA8C;wBACjE,QAAQ,yBAAyB;oBACnC;oBACA,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;gBAC1D;gBAEA,MAAM,SAAS,MAAM,SAAS,IAAI;gBAClC,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;oBAC/B,QAAQ,GAAG,CAAC,8BAA8B,OAAO,IAAI;oBACvD,YAAY,OAAO,IAAI;gBACzB,OAAO;oBACL,YAAY;oBACZ,SAAS,OAAO,OAAO,IAAI;gBAC7B;YACF,EAAE,OAAO,GAAG;gBACV,QAAQ,KAAK,CAAC,wCAAwC;gBACtD,SAAS;YACX,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE,GAAG,uDAAuD;IAE/D,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAC1C,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAI,WAAU;;;;;;;;;;;;IAGrB;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAC1C,8OAAC;8BAAG;;;;;;;;;;;;IAGV;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAC1C,8OAAC;oBAAE,WAAU;8BAAU;;;;;;;;;;;;IAG7B;IAEA,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAC1C,8OAAC;oBAAE,WAAU;8BAAW,SAAS,WAAW;;;;;;8BAC5C,8OAAC;;;;;;;;;;;IAGP;AACF;uCAEe"}},
    {"offset": {"line": 854, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 860, "column": 0}, "map": {"version":3,"sources":["file:///Users/aaron/Documents/MYRA-langchain/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Output from \"@/components/Output\";\nimport TextArea from \"@/components/TextArea\";\nimport { type ChatOutput } from \"@/types\";\nimport { useState } from \"react\";\nimport MostRecentStrategyDisplay from \"@/components/MostRecentStrategyDisplay\";\n\nexport default function Home() {\n  const [outputs, setOutputs] = useState<ChatOutput[]>([]);\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  return (\n    <div className=\"flex min-h-screen bg-white text-black font-inter\">\n      {/* Sidebar - Takes 20% of the screen width */}\n      <div className=\"w-1/5 p-4 border-r border-gray-300 flex-shrink-0 overflow-y-auto sticky top-0 h-screen\">\n        <MostRecentStrategyDisplay />\n      </div>\n\n      {/* Main content area - Takes the remaining 80% of the screen width */}\n      <main\n        // Main content area will now be scrollable if its content overflows.\n        // We remove 'relative' as the fixed search bar will be relative to the viewport.\n        className={`flex-1 flex flex-col items-center pt-10 overflow-y-auto`} // Added overflow-y-auto\n      >\n        {/*\n          This div contains the \"What do you want to know?\" text and the Outputs.\n          - w-full max-w-2xl mx-auto: Ensures horizontal centering and max-width.\n          - flex-grow: Makes this div expand to fill available vertical space.\n          - Conditional classes for vertical centering and bottom margin:\n            - If no outputs: 'flex flex-col items-center justify-center flex-grow' for full vertical centering.\n            - If outputs: 'mb-32' to provide space above the fixed search bar.\n        */}\n        <div\n          className={`w-full max-w-2xl mx-auto ${\n            outputs.length === 0\n              ? \"flex flex-col items-center justify-center flex-grow\" // Vertically centers content and search bar\n              : \"flex-grow mb-32\" // Pushes content up, provides space for fixed search bar\n          }`}\n        >\n          {outputs.length === 0 && (\n            <h1 className=\"text-4xl text-center mb-5\">\n              What do you want to know?\n            </h1>\n          )}\n\n          {/* Render TextArea directly here when no outputs, so it's below the H1 */}\n          {outputs.length === 0 && (\n            <TextArea\n              className={\"bg-white text-black border border-gray-300 rounded-md p-3 w-full\"}\n              setIsGenerating={setIsGenerating}\n              isGenerating={isGenerating}\n              outputs={outputs}\n              setOutputs={setOutputs}\n            />\n          )}\n\n          {/* Outputs will render here */}\n          {outputs.map((output, i) => (\n            <Output key={i} output={output} isGenerating={isGenerating} />\n          ))}\n        </div>\n      </main>\n\n      {/*\n        This div wraps the TextArea and is positioned FIXED at the bottom of the viewport\n        ONLY when there are outputs.\n        - fixed: Keeps it in place relative to the viewport during scroll.\n        - bottom-0: Anchors it to the bottom of the viewport.\n        - left-[20%]: Positions it to the right of the 20% sidebar.\n        - right-0: Stretches it to the right edge of the viewport.\n        - pb-8: Adds padding to ensure the search bar itself isn't right at the very edge.\n        - z-10: Ensures it stays on top of other content.\n      */}\n      {outputs.length > 0 && (\n        <div className=\"fixed bottom-0 left-[20%] right-0 pb-8 z-10\">\n          <div className=\"w-full max-w-2xl mx-auto\"> {/* This div centers the textarea within the fixed area */}\n            <TextArea\n              className={\"bg-white text-black border border-gray-300 rounded-md p-3 w-full\"}\n              setIsGenerating={setIsGenerating}\n              isGenerating={isGenerating}\n              outputs={outputs}\n              setOutputs={setOutputs}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB,EAAE;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,+IAAA,CAAA,UAAyB;;;;;;;;;;0BAI5B,8OAAC;gBACC,qEAAqE;gBACrE,iFAAiF;gBACjF,WAAW,CAAC,uDAAuD,CAAC;0BAUpE,cAAA,8OAAC;oBACC,WAAW,CAAC,yBAAyB,EACnC,QAAQ,MAAM,KAAK,IACf,sDAAsD,4CAA4C;uBAClG,kBAAkB,yDAAyD;sBAC/E;;wBAED,QAAQ,MAAM,KAAK,mBAClB,8OAAC;4BAAG,WAAU;sCAA4B;;;;;;wBAM3C,QAAQ,MAAM,KAAK,mBAClB,8OAAC,8HAAA,CAAA,UAAQ;4BACP,WAAW;4BACX,iBAAiB;4BACjB,cAAc;4BACd,SAAS;4BACT,YAAY;;;;;;wBAKf,QAAQ,GAAG,CAAC,CAAC,QAAQ,kBACpB,8OAAC,4HAAA,CAAA,UAAM;gCAAS,QAAQ;gCAAQ,cAAc;+BAAjC;;;;;;;;;;;;;;;;YAelB,QAAQ,MAAM,GAAG,mBAChB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;wBAA2B;sCACxC,8OAAC,8HAAA,CAAA,UAAQ;4BACP,WAAW;4BACX,iBAAiB;4BACjB,cAAc;4BACd,SAAS;4BACT,YAAY;;;;;;;;;;;;;;;;;;;;;;;AAO1B"}},
    {"offset": {"line": 974, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}